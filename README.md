# solr-bj-suggest
Create custom query parser for hierarchical prefix search based on Solr

Допустим, у нас есть каталог документов с отношением parent-child (продукты и юписи).
У продуктов есть , бизнес поля id, BRAND и PRODUCT_TYPE, у юписей - id, COLOR и SIZE. Можно добавить техническое поле scope, чтобы разделять типы документов.
Мы хотим сделать префиксный поиск, то есть, найти документы по заданной фразе, при этом последнее слово фразы может быть префиксом, а не полноценным словом.

Требования:
1. Написать свой квери парсер, который по заданной фразе строит кверю, которая пытается сматчить куски фразы в поля продуктов и юписей, при этом возвращать мы хотим только продукты. Так же мы хотим, чтобы в полученной квере последнее слово фразы находилось как префикс.
1.1. Мы хотим ценить документы, которые содержат более длинные куски фразы в своих значениях, выше чем документы, содержащие короткие куски фразы. Например, матч куска фразы “calvin klein jeans” как BRAND:“calvin klein jeans” должен цениться выше чем матч этой фразы в разбиении BRAND:“calvin klein” + PRODUCT_TYPE:“jeans”.
2. Реализовать свой реквест хэндлер (замапить на “bjqSuggest”), который будет использовать  написанный нами квери парсер.
2.1. Реквест хэндлер должен поддерживать стандартные поисковые параметры солорических запросов (raws, start, q и тд)
2.2 Реквест хэндлер должен отдавать в ответе список бизнес id найденных продуктов и qTime в виде JSON
3. Создать тестовый набор данных (около 10 иерархических документов), позволяющий продемонстрировать работу хэндлера и парсера.